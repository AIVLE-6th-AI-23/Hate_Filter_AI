<!DOCTYPE html>
<html>
<head>
    <title>게시판 목록</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <h2>내 게시판 목록</h2>

    <!-- 전체 게시판 목록 -->
    <div class="card mb-4">
        <div class="card-header">
            전체 게시판
        </div>
        <div class="card-body">
            <div id="boardList"></div>
        </div>
    </div>

    <!-- 페이징된 게시판 목록 -->
    <div class="card">
        <div class="card-header">
            페이징된 게시판
        </div>
        <div class="card-body">
            <div id="pagedBoardList"></div>
            <nav>
                <ul class="pagination" id="pagination"></ul>
            </nav>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        // 전체 게시판 목록 로드
        loadBoards();
        // 페이징된 게시판 목록 로드 (첫 페이지)
        loadPagedBoards(0);
    });

    function loadBoards() {
        $.ajax({
            url: '/boards/my',
            method: 'GET',
            success: function(response) {
                let html = '<ul class="list-group">';
                response.forEach(board => {
                    html += `
                        <li class="list-group-item">
                            <h5>${board.boardTitle}</h5>
                            <p>${board.description}</p>
                        </li>`;
                });
                html += '</ul>';
                $('#boardList').html(html);
            },
            error: function(xhr) {
                alert('Error loading boards');
            }
        });
    }

    function loadPagedBoards(page) {
        $.ajax({
            url: `/boards/my/page?page=${page}&size=10`,
            method: 'GET',
            success: function(response) {
                let html = '<ul class="list-group">';
                response.content.forEach(board => {
                    html += `
                        <li class="list-group-item">
                            <h5>${board.boardTitle}</h5>
                            <p>${board.description}</p>
                        </li>`;
                });
                html += '</ul>';
                $('#pagedBoardList').html(html);

                // 페이징 버튼 생성
                let pagination = '';
                for(let i = 0; i < response.totalPages; i++) {
                    pagination += `
                        <li class="page-item ${response.number === i ? 'active' : ''}">
                            <a class="page-link" href="#" onclick="loadPagedBoards(${i})">${i + 1}</a>
                        </li>`;
                }
                $('#pagination').html(pagination);
            },
            error: function(xhr) {
                alert('Error loading paged boards');
            }
        });
    }
</script>
</body>
</html>